---
title: "NDH802 - Assignment 2"
author: "Group no."
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
rm(list=ls())
```

------------------------------------------------------------------------

-   The assignment includes 2 questions, 5 points each.
-   Question 1 is empirical (based on the data provided). Question 2 is theoretical (based on the assumption in the question).
-   Submit your assignment via Canvas before 15:00 CET, April 27, 2021.
-   Your submission should be an RMarkdown file with your solutions in words and/or R code. If you handwrite parts of your assignment, insert it as an image near the corresponding question(s). Name the file NDH802_Assignment2_GroupNumber.
-   You should work in groups and contribute equally.
-   You can copy my code, but make sure you understand it.
-   You should not have the exact solutions and/or results with other groups.
-   Results without code/justifications will not be graded.

------------------------------------------------------------------------

### Set things up

Set your working directory and fill in your group number. For example, if you are group 3, make it `our_group <- 3`. If you don't fill in your group number or fill in the wrong number, your assignment will **not** be graded.

```{r}
#setwd("")
our_group <- 2
```

Run this code chunk to load data into your R Environment. The command will randomly select 1,000,000 rows of data from the original data set. Hereby each and every group should have a unique `df`. Accordingly, your results should be different from other groups' and you should not be comparing them.

```{r}
inference_dataset <- read.csv("https://cda.hhs.se/NDH802data2022.csv")
set.seed(our_group+23); df <- inference_dataset[sample(1:nrow(inference_dataset),
                           size = 1000000,
                           replace = FALSE), -1];
on_basket = inference_dataset$online.spend / inference_dataset$online.trans
sample_A = sample(on_basket[complete.cases(on_basket)], 100)
sample_B = sample(on_basket[complete.cases(on_basket)], 100)

rm(inference_dataset)
```

\newpage

### Question 1. Binomial and normal distribution.

Let $B$ denotes the (true) average online basket value in SEK. Assume $B$ follows the distribution as in the figure below. $B\sim N(\mu = 700, \sigma^2 = 150^2)$. You randomly and independently sample 10 online baskets from your data set.

a.  What is the probability that more than 4 of them are exactly 650kr? (1p)

b.  What is the probability that exactly 4 of them are more than 650kr? (1p)

c.  What is the probability that more than 4 of them are more than 650kr? (1p)

d.  How many baskets do you expect to be more than 500kr and less than 650kr? (1p)

e.  What is the probability that 5 baskets are more than 650kr and the other 5 are more than 500kr and less than 650kr? (1p)

### Question 2. Sampling theory and confidence intervals

Forget the assumptions in Question 1.

To investigate the average value of online baskets, you sample some online baskets from the population. Assume the *true* average value of online baskets follows a normal distribution. `sample_A` contains the average online baskets values of 100 customers and `sample_B` contains the average online baskets values of 100 customers.

(a) Based on `sample_A`, what is the 90% confidence interval for the population mean? (0.5p) How would you interpret the 90% confidence interval, in general and in this case? (0.5p)

(b) Compare the the 90% confidence interval compute based on `sample_B` with what you computed in question (a). (When) should they be similar or different and why? (1p)

(c) Suppose we independently draw 100 samples, each contain 100 baskets, from the population and compute the corresponding 100 sample means. Do you expect 90% of these sample means fall into the confidence interval you found in (a)? Why/why not? (1p)

(d) Suppose you find a 90% confidence interval from 650 to 750 (or the interval you found in (a), or whichever fixed interval). What is the probability the population mean will lie between 650 to 750? The answer should be numeric. (1p)

(e) Suppose you find a 90% credible interval from 650 to 750 (or the interval you found in (a), or whichever fixed interval). What is the probability the population mean will lie between 650 to 750? The answer should be numeric. (1p)

\vfill

*Have fun and good luck!*\
*Huong and Emelie*
